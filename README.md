# Zombie-X

## 项目介绍

一款开放世界沙盒末日生存游戏，3D版本的僵尸生存体验。

## 技术栈

- **引擎**: Godot 4.5
- **地形**: Terrain3D 插件
- **语言**: GDScript

## 项目结构

```
zombie-x/
├── addons/              # 插件目录
│   └── terrain_3d/      # Terrain3D 地形插件
├── assets/              # 资源文件
│   └── building/        # 建筑模型
├── camera/              # 相机相关
├── data/                # 数据文件（地形等）
├── effects_shared/      # 共享特效
├── player/              # 玩家系统
│   ├── audio/           # 音效
│   ├── bullet/          # 子弹系统
│   ├── model/           # 玩家模型
│   ├── progress/        # 进度条UI
│   ├── scripts/         # 玩家脚本
│   └── textures/        # 玩家纹理
├── scenes/              # 场景文件
│   ├── main/            # 主场景
│   ├── ui/              # UI场景
│   └── world/           # 世界场景
└── scripts/             # 核心脚本
    ├── constants.gd     # 常量配置（自动加载）
    ├── event_bus.gd     # 事件总线（自动加载）
    └── game_manager.gd  # 游戏管理器（自动加载）
```

## 核心功能

### ✅ 已实现功能

#### 1. 玩家系统
- 第一人称/第三人称视角切换
- 玩家移动（WASD）
- 跳跃系统
- 相机控制（鼠标/键盘双模式）
- 瞄准系统（右键瞄准）
- 射击系统（左键射击）
- 换弹系统（R键）
- 玩家属性系统（生命值、攻击力等）
- 动态准星

#### 2. 武器系统
- 枪械射击
- 子弹物理飞行
- 碰撞检测
- 射击特效

#### 3. UI系统
- 动态准星
- 圆形进度条组件
- 背包UI（框架）
- 健康值/弹药显示

#### 4. 核心架构
- **常量配置系统** (`constants.gd`)
  - 集中管理所有游戏常量
  - 包含玩家、相机、子弹、UI等参数
  - 工具函数：`ease_out_cubic()`
  
- **事件总线** (`event_bus.gd`)
  - 信号解耦系统
  - 支持玩家、武器、UI、世界、游戏状态事件
  - 自动加载单例

- **游戏管理器** (`game_manager.gd`)
  - 游戏状态管理（菜单、游戏中、暂停、游戏结束）
  - 玩家注册和管理
  - 暂停/恢复功能
  - 自动加载单例

#### 5. 世界系统
- Terrain3D 地形系统
- 建筑模型（街区）
- 地面碰撞

### 📋 开发计划

#### 高优先级
- [ ] 实现子弹对象池（性能优化）
- [ ] 添加僵尸/敌人AI系统
- [ ] 主菜单和暂停菜单
- [ ] 完善UI（健康条、弹药显示等）

#### 中优先级
- [ ] 物品收集/背包系统
- [ ] 存档系统
- [ ] 建造系统
- [ ] 任务系统
- [ ] 调试UI面板

#### 低优先级
- [ ] 更多武器类型
- [ ] 更多敌人类型
- [ ] 天气系统
- [ ] 日夜循环
- [ ] 音效完善

## 操作说明

| 操作 | 按键 |
|------|------|
| 移动 | W/A/S/D |
| 跳跃 | 空格 |
| 瞄准 | 鼠标右键 |
| 射击 | 鼠标左键 |
| 换弹 | R |
| 暂停 | ESC |
| 相机旋转（鼠标模式） | 移动鼠标 |
| 相机旋转（键盘模式） | Q/E |

## 自动加载单例

项目配置了以下自动加载单例：

| 名称 | 脚本 | 用途 |
|------|------|------|
| `GameConstants` | `res://scripts/constants.gd` | 游戏常量配置 |
| `GameManager` | `res://scripts/game_manager.gd` | 游戏状态管理 |
| `EventBus` | `res://scripts/event_bus.gd` | 事件总线 |

## 最近更新

### 2026-02-16
- 修复 GDScript 静态函数调用错误（`STATIC_CALLED_ON_INSTANCE`）
- 修复参数名与内置函数冲突（`SHADOWED_GLOBAL_IDENTIFIER`）
- 使用 Godot 内置 `deg_to_rad()` 替代自定义函数
- 注释掉 Terrain3D 插件中已弃用的 API
- 更新常量配置系统，移除冗余的角度转换函数

## 注意事项

- Terrain3D 插件需要正确配置纹理资源以消除警告
- 部分功能处于开发阶段，可能存在未完善的地方
