# Zombie-X

## 项目介绍

计划做一款开放世界沙盒末日生存游戏，类似《Zomboid》的3D版本

## 开发计划

~~- 添加瞄准姿态时鼠标准星~~
- 添加任务右上角换弹等动作的进度条UI
- 添加一个调试UI面板

## 已完成的优化

### ✅ 1. 常量配置文件
- 创建了 `scripts/constants.gd`，集中管理所有游戏常量
- 包含玩家移动参数、相机参数、子弹参数、玩家属性默认值、UI参数等
- 提供了工具函数如 `deg_to_rad()`, `rad_to_deg()`, `ease_out_cubic()`

### ✅ 2. 游戏管理器
- 创建了 `scripts/game_manager.gd`，统一管理游戏状态
- 支持游戏状态：菜单、游戏中、暂停、游戏结束
- 玩家注册和管理
- 暂停/恢复功能
- 已配置为自动加载单例

### ✅ 3. 事件总线（信号解耦）
- 创建了 `scripts/event_bus.gd`，用于系统间通信
- 包含玩家事件、武器事件、UI事件、世界事件、游戏状态事件
- 已配置为自动加载单例
- 所有脚本已更新使用事件总线发送事件

### ✅ 4. 脚本更新
- `player.gd`：使用 GameConstants 和 ZombieEventBus
- `player_stats.gd`：使用 GameConstants 中的默认值
- `player_input.gd`：使用 GameConstants 替换所有硬编码常量
- `bullet.gd`：使用 GameConstants
- `circle_progress.gd`：使用 GameConstants

## 剩余优化计划

### 性能优化
- 子弹对象池：目前每次射击都 preload().instantiate() 新子弹，频繁创建/销毁会影响性能，建议使用对象池
- 缺少资源预加载：关键资源（如子弹场景）应该在游戏启动时预加载，而不是运行时动态加载
- 地形可能需要LOD优化：虽然使用了Terrain3D，但可以进一步优化渲染距离

### 功能缺失
- 缺少僵尸/敌人系统：这是"僵尸-X"游戏的核心，但目前还没有
- 缺少物品收集/背包系统：虽然有背包UI，但没有实际的物品逻辑
- 缺少建造系统：沙盒游戏的重要元素
- 缺少存档系统：没有持久化游戏进度
- 缺少主菜单和暂停菜单
- 缺少任务系统（README中提到了但未实现）
- 缺少调试UI面板（README中提到了但未实现）

### 代码质量
- 缺少错误处理：很多节点引用使用 get_node() 或 get_node_or_null()，但缺少完整的空值检查
- 注释可以更完善：部分复杂逻辑缺少注释说明

## 📋 优先建议

1. **高优先级**：
   - 实现子弹对象池
   - 添加敌人/僵尸系统
   - 完善UI（主菜单、暂停菜单）

2. **中优先级**：
   - 实现物品/背包系统
   - 添加存档系统
   - 添加建造系统

3. **低优先级**：
   - 代码重构和优化
   - 添加更多视觉特效
   - 完善音效系统